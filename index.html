<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>East Hampton Chinese New Year Party — Home</title>
  <link href="fonts.googleapis.com" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
 </head>
<body>
  <header class="topnav">
    <div class="brand">East Hampton Chinese New Year</div>
    <nav aria-label="Primary">
      <div class="nav-menu">
        <button id="menu-button" class="menu-button" aria-haspopup="true" aria-expanded="false" aria-controls="menu-list">Menu ▾</button>
        <ul id="menu-list" class="dropdown" role="menu"  class="navlinks" hidden>
          <li role="none"><a role="menuitem" href="#" data-src="2026.html" class="navlinks" >2026</a></li>
          <li role="none"><a role="menuitem" href="#" data-src="2025.html" class="navlinks" >2025</a></li>
          <li role="none"><a role="menuitem" href="#" data-src="chineseZodiac.html" class="navlinks" >Chinese zodiac</a></li>
        </ul>
      </div>

    </nav>
  </header>

  <main>
    <!-- Load 2026.html by default in an iframe so users see 2026 content when opening index.html -->
    <iframe id="content-frame" src="2026.html" style="display:block; width:100%; height:100%; border:none; margin:0; padding:0;"></iframe>
  </main>

  
  <script>
    // Dropdown behavior: toggle, close on outside click / Escape, load iframe on selection
    (function () {
      const btn = document.getElementById('menu-button');
      const menu = document.getElementById('menu-list');
      if (!btn || !menu) return;

      function closeMenu() {
        btn.setAttribute('aria-expanded', 'false');
        menu.hidden = true;
      }

      // sync active menu item with the iframe src
      function setActiveFromFrame() {
        const frame = document.getElementById('content-frame');
        const current = frame ? frame.getAttribute('src') : null;
        menu.querySelectorAll('a[role="menuitem"]').forEach(el => {
          el.removeAttribute('aria-current');
          el.classList.remove('active');
        });
        if (current) {
          const match = menu.querySelector('a[data-src="' + current + '"]');
          if (match) {
            match.setAttribute('aria-current', 'page');
            match.classList.add('active');
          }
        }
      }

      function openMenu() {
        btn.setAttribute('aria-expanded', 'true');
        menu.hidden = false;
        // focus the active/current item if present; don't force-focus the first item
        const active = menu.querySelector('a[aria-current="page"]');
        if (active) active.focus();
      }

      btn.addEventListener('click', (e) => {
        const expanded = btn.getAttribute('aria-expanded') === 'true';
        if (expanded) closeMenu(); else openMenu();
      });

      document.addEventListener('click', (e) => {
        if (!btn.contains(e.target) && !menu.contains(e.target)) closeMenu();
      });

      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          closeMenu();
          btn.focus();
        }
      });

      // set iframe src and update active state when a menu item is clicked
      menu.addEventListener('click', (e) => {
        const a = e.target.closest('a[role="menuitem"]');
        if (!a) return;
        e.preventDefault();
        const src = a.dataset.src;
        if (src) {
          document.getElementById('content-frame').src = src;
          // mark this item as active immediately
          menu.querySelectorAll('a[role="menuitem"]').forEach(el => {
            el.removeAttribute('aria-current');
            el.classList.remove('active');
          });
          a.setAttribute('aria-current', 'page');
          a.classList.add('active');
        }
        closeMenu();
      });

      // initialize active state and keep it in sync with iframe loads
      setActiveFromFrame();
      const iframe = document.getElementById('content-frame');
      if (iframe) iframe.addEventListener('load', setActiveFromFrame);
    })();
  </script>

</body>
</html>